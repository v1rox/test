*{box-sizing:border-box;margin:0;padding:0}html,body{margin:0;padding:0;font-family:Arial,sans-serif;height:100vh;overflow:hidden;background-color:#1e1e1e;color:#e0e0e0}#app{display:flex;height:100vh;width:100vw}.toolbar{min-width:300px;width:300px;flex-shrink:0;height:100vh;background-color:#2d2d2d;border-right:1px solid #404040;padding:12px 0 5px;display:flex;flex-direction:column;gap:8px;overflow-y:auto;scrollbar-width:thin;scrollbar-color:#404040 transparent;position:relative}.toolbar-section{display:flex;flex-direction:column;gap:6px;width:100%;padding:0 8px;margin-bottom:0}.toolbar h2,.toolbar-section h2{margin:12px -8px 8px;font-size:13px;color:#e0e0e0e6;font-weight:500;text-align:center;padding:10px 0;background:linear-gradient(to right,transparent,rgba(255,255,255,.08) 35%,rgba(255,255,255,.08) 65%,transparent);border-bottom:1px solid rgba(64,64,64,.6);text-transform:uppercase;letter-spacing:2px;-webkit-user-select:none;user-select:none;position:relative;text-shadow:0 1px 2px rgba(0,0,0,.15)}.toolbar h2:before,.toolbar-section h2:before{content:"";position:absolute;top:0;left:50%;transform:translate(-50%);width:60px;height:1px;background:linear-gradient(to right,transparent,rgba(255,255,255,.15),transparent)}.toolbar h2:after,.toolbar-section h2:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);width:120px;height:1px;background:linear-gradient(to right,transparent,rgba(255,255,255,.2),rgba(255,255,255,.2),transparent)}.toolbar h2:first-child{margin-top:0}.map-container{flex:1;height:100vh;background-color:#1e1e1e;position:relative}.map-container canvas{width:100%;height:100%;display:block}.button-group{display:flex;flex-direction:column;align-items:center;gap:8px;width:calc(100% - 16px);margin:0 8px}.button-group .drawing-button,.button-group .export-button{width:134px;margin:0}.drawing-button,.export-button{width:100%;padding:8px 12px;border:1px solid #404040;background-color:#3d3d3d;color:#e0e0e0;cursor:pointer;border-radius:4px;transition:all .2s ease;text-align:center;font-size:14px}.drawing-button.selected{background-color:#0078d4;color:#fff;border-color:#0078d4}.drawing-button:hover:not(.selected),.export-button:hover{background-color:#4d4d4d}.terrain-button,.toolbar-button{width:100%;padding:8px 12px;border:1px solid #404040;background-color:#3d3d3d;color:#e0e0e0;cursor:pointer;border-radius:4px;transition:all .2s ease;text-align:left;font-size:14px}.terrain-button:hover,.toolbar-button:hover{background-color:#4d4d4d}.terrain-button.selected,.toolbar-button.selected{background-color:#0078d4;color:#fff;border-color:#0078d4}.export-buttons-container{display:flex;flex-direction:column;gap:6px;margin:0;padding:0 8px;width:100%}.export-buttons-container h2:not(:first-child){margin-top:10px}.export-buttons-row{display:flex;gap:4px;width:100%}.storage-buttons-row{display:flex;flex-wrap:wrap;gap:4px;width:100%;max-width:240px;margin:0 auto;padding:0}.storage-buttons-row .export-button{background:linear-gradient(135deg,#3a3a3a,#2a2a2a)!important;border-radius:6px!important;box-shadow:0 2px 4px #0003!important;transition:background .2s ease,box-shadow .2s ease!important;font-size:15px!important;font-weight:400!important;color:#fff!important;border:1px solid rgba(255,255,255,.2)!important;transform:none!important;height:38px;padding:8px 12px;display:flex;align-items:center;justify-content:center}.storage-buttons-row .export-button:hover{background:linear-gradient(135deg,#4a4a4a,#3a3a3a)!important;box-shadow:0 2px 4px #0003!important;transform:none!important}.storage-buttons-row .export-button:first-child{flex:0 0 100%;margin-bottom:4px}.storage-buttons-row .export-button:not(:first-child){flex:1}.storage-buttons-row .reset-button{background:linear-gradient(135deg,#d32f2f,#c62828)!important;border:1px solid rgba(255,255,255,.2)!important;color:#fff!important;border-radius:6px!important;font-size:15px!important;font-weight:400!important;transform:none!important}.storage-buttons-row .reset-button:hover{background:linear-gradient(135deg,#e53935,#d32f2f)!important;box-shadow:0 2px 4px #0003!important;transform:none!important}.storage-divider{width:100%;height:1px;margin:4px 0;background:linear-gradient(to right,transparent,rgba(255,255,255,.2),rgba(255,255,255,.2),transparent)}.drawing-toolbar{display:flex;flex-direction:column;gap:8px}.size-control{display:flex;align-items:center;gap:8px;padding:8px;margin-bottom:0}.size-control label{flex:0 0 auto;color:#e0e0e0;font-size:14px}.size-slider{flex:1;height:4px;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#404040;border-radius:2px;outline:none}.size-slider::-webkit-slider-thumb{-webkit-appearance:none;width:16px;height:16px;border-radius:50%;background:#0078d4;cursor:pointer;border:none}.size-slider::-moz-range-thumb{width:16px;height:16px;border-radius:50%;background:#0078d4;cursor:pointer;border:none}.size-value{flex:0 0 auto;min-width:24px;text-align:right;color:#e0e0e0;font-size:14px}.undo-redo-container{display:flex;gap:8px;margin-bottom:0}.undo-redo-container button{flex:1;padding:8px 12px;border:1px solid #404040;background-color:#3d3d3d;color:#e0e0e0;cursor:pointer;border-radius:4px;transition:all .2s ease;text-align:center;font-size:14px}.undo-redo-container button:hover{background-color:#4d4d4d}.png-export-button{background-color:#2ea043;border-color:#238636;color:#fff}.png-export-button:hover{background-color:#3fb950;border-color:#2ea043}.json-export-button{background-color:#0078d4;border-color:#0078d4;color:#fff}.json-export-button:hover{background-color:#106ebe;border-color:#0078d4}.reset-button{background-color:#d42828!important;border-color:#b22222!important;color:#fff!important}.reset-button:hover{background-color:#e63939!important;border-color:#d42828!important}.mode-selector{display:flex;border-radius:6px;overflow:hidden;border:1px solid rgba(255,255,255,.2);width:calc(100% - 8px);margin:4px;background-color:#2d2d2d}.mode-button{flex:1;padding:8px 16px;border:none;background:transparent;color:#e0e0e0;cursor:pointer;font-size:14px;transition:all .2s ease;position:relative;text-align:center}.mode-button:first-child{border-right:1px solid rgba(255,255,255,.2)}.mode-button.selected{background-color:#0078d4;color:#fff}.mode-button:hover:not(.selected){background-color:#3d3d3d}.map-control-button{position:absolute;top:10px;left:10px;width:40px;height:40px;border-radius:8px;background:rgba(30,30,30,.8);border:1px solid #404040;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease;z-index:1000}.map-control-button.grid-size,.grid-size-controls{display:none!important}.map-control-button:hover{background:rgba(40,40,40,.9);border-color:#505050}.map-control-button svg{width:20px;height:20px}.grid-size-controls{position:absolute;top:60px;left:10px;display:flex;flex-direction:column;gap:8px;padding:12px;background:rgba(45,45,45,.95);border:1px solid #404040;border-radius:4px;z-index:1000;min-width:160px}.grid-control{display:flex;gap:4px;justify-content:center}.grid-control.top,.grid-control.bottom{margin:0}.middle-controls{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:4px 0}.middle-controls .dimensions{font-size:14px;font-weight:500;color:#e0e0e0;min-width:60px;text-align:center}.grid-size-controls button{width:28px;height:28px;padding:0;border:1px solid #404040;background:rgba(35,35,35,.95);color:#fff;border-radius:3px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease;font-size:16px;font-weight:500;line-height:1}.grid-size-controls button.plus{color:#4caf50}.grid-size-controls button.minus{color:#f44336}.grid-size-controls button:hover{background:rgba(45,45,45,.95);border-color:#505050}.grid-size-controls button:active{transform:scale(.95)}.map-control-button.grid-size,.map-control-button.grid-size .grid-icon,.map-control-button.grid-size .dimensions{display:none}.grid-size-info,.grid-controls,.grid-controls button,.grid-controls button svg,.grid-controls .center-cell,.col-controls,.row-controls{display:none}.layer-control{display:none!important;margin-top:8px;margin-bottom:8px;align-items:center;justify-content:space-between;gap:12px;padding:4px 8px}.layer-control label{font-size:13px;color:#e0e0e0;-webkit-user-select:none;user-select:none;cursor:pointer}.toggle-switch{position:relative;width:44px;height:24px}.toggle-switch input{opacity:0;width:0;height:0}.toggle-slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#3d3d3d;transition:.3s;border-radius:24px;border:1px solid #404040}.toggle-slider:before{position:absolute;content:"";height:18px;width:18px;left:2px;bottom:2px;background-color:#e0e0e0;transition:.3s;border-radius:50%}input:checked+.toggle-slider{background-color:#0078d4;border-color:#0078d4}input:checked+.toggle-slider:before{transform:translate(20px);background-color:#fff}.toggle-slider:hover{background-color:#4d4d4d}input:checked+.toggle-slider:hover{background-color:#106ebe}.grid-size-info{display:flex;align-items:center;justify-content:center;padding:8px;background:#333;border-radius:4px;margin-bottom:8px;font-size:14px;color:#e0e0e0}.grid-controls{display:grid;grid-template-columns:auto 1fr auto;grid-template-rows:auto auto auto;gap:4px;margin-bottom:12px}.grid-controls button{width:32px;height:32px;padding:0;display:flex;align-items:center;justify-content:center;background:#3d3d3d;border:1px solid #404040;color:#e0e0e0;cursor:pointer;border-radius:4px;transition:all .2s ease}.grid-controls button:hover{background:#4d4d4d}.grid-controls button svg{width:16px;height:16px}.grid-controls .center-cell{background:#333;border-radius:4px;display:flex;align-items:center;justify-content:center;padding:4px}.terrain-button-container{display:grid;grid-template-columns:repeat(4,1fr);gap:6px;padding:4px;margin:0 -4px}.no-terrain-container{display:none}.terrain-button{width:56px;height:56px;padding:2px;border:2px solid #404040;background:#2a2a2a;border-radius:6px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease;position:relative;overflow:hidden;margin:0 auto}.terrain-button:hover{background:linear-gradient(135deg,#4d4d4d,#3a3a3a);transform:scale(1.05);box-shadow:0 12px 24px #0000004d,inset 0 0 0 1px #fff3;transition:background .3s ease,transform .3s ease,box-shadow .3s ease}.terrain-button.selected{border-color:#4b9cd3;background:#2a2a2a;box-shadow:0 0 0 1px #4b9cd3;transition:none!important;animation:none!important}.terrain-button.selected:hover{background:#2a2a2a;border-color:#4b9cd3;box-shadow:0 0 0 2px #4b9cd3;transition:none!important;animation:none!important;transform:none}.terrain-button canvas{width:44px;height:44px;border-radius:4px;image-rendering:auto}.toolbar::-webkit-scrollbar{width:8px}.toolbar::-webkit-scrollbar-track{background:transparent}.toolbar::-webkit-scrollbar-thumb{background-color:#404040;border-radius:4px;border:2px solid #2d2d2d}.toolbar::-webkit-scrollbar-thumb:hover{background-color:#505050}.terrain-button.custom-terrain{background:linear-gradient(45deg,#2a2a2a 25%,#3a3a3a 25%,#3a3a3a 50%,#2a2a2a 50%,#2a2a2a 75%,#3a3a3a 75%);background-size:10px 10px}.terrain-button.custom-terrain:hover{background:linear-gradient(45deg,#3a3a3a 25%,#4a4a4a 25%,#4a4a4a 50%,#3a3a3a 50%,#3a3a3a 75%,#4a4a4a 75%);background-size:10px 10px}.modal-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.7);z-index:1999}.custom-terrain-modal{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#2d2d2d;border:1px solid #404040;border-radius:8px;padding:24px;width:400px;max-width:90vw;z-index:2000;box-shadow:0 8px 24px #0006}.custom-terrain-modal h3{margin:0 0 20px;font-size:18px;color:#e0e0e0;font-weight:600}.custom-terrain-tabs{display:flex;gap:8px;margin-bottom:20px}.custom-terrain-tab{flex:1;padding:10px;background:#3d3d3d;border:1px solid #404040;border-radius:6px;color:#e0e0e0;cursor:pointer;font-size:14px;transition:all .2s ease}.custom-terrain-tab:hover{background:#4d4d4d}.custom-terrain-tab.active{background:#0078d4;border-color:#0078d4;color:#fff}.custom-terrain-content{margin-bottom:20px;min-height:240px}.color-picker-section{display:flex;align-items:center;justify-content:center;padding:16px;background:rgba(0,0,0,.2);border-radius:8px;min-height:240px}.color-picker-container{position:relative;width:200px;height:200px}.color-hex-preview{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:8px}.color-picker-input{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}.color-preview{display:none}.color-picker-container input[type=color]{cursor:pointer;padding:0;background:none;appearance:none;-webkit-appearance:none;-moz-appearance:none}.color-picker-container input[type=color]::-webkit-color-swatch-wrapper{padding:0}.color-picker-container input[type=color]::-webkit-color-swatch{border:none}.color-picker-container input[type=color]::-moz-color-swatch{border:none}.image-upload-section{display:flex;flex-direction:column;gap:16px}.image-upload-area{border:2px dashed #404040;border-radius:8px;padding:32px 20px;text-align:center;cursor:pointer;transition:all .2s ease;background:rgba(255,255,255,.02)}.image-upload-area.drag-over{border-color:#0078d4;background:rgba(0,120,212,.1);transform:scale(1.02)}.image-upload-area:hover{border-color:#0078d4;background:rgba(0,120,212,.1)}.upload-icon{font-size:32px;margin-bottom:12px;opacity:.7}.upload-text{color:#e0e0e0;font-size:14px}.image-preview-container{position:relative;width:100%;height:240px;background:rgba(0,0,0,.2);border-radius:8px;overflow:hidden;cursor:grab}.image-preview-container:active{cursor:grabbing}.preview-image{position:absolute;transform-origin:center;transition:transform .1s ease-out;pointer-events:none;will-change:transform;opacity:0;max-width:none;max-height:none}.preview-hexagon-overlay{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.image-controls{display:flex;gap:8px;justify-content:center;margin-top:8px}.image-control-button{padding:6px 12px;background:#3d3d3d;border:1px solid #404040;border-radius:4px;color:#e0e0e0;cursor:pointer;font-size:12px;transition:all .2s ease}.image-control-button:hover{background:#4d4d4d}.modal-buttons{display:flex;gap:12px;margin-top:24px}.modal-button{flex:1;padding:12px 24px;border:1px solid #404040;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.modal-button.primary{background:#0078d4;border-color:#0078d4;color:#fff}.modal-button.primary:hover{background:#106ebe}.modal-button.secondary{background:#3d3d3d;color:#e0e0e0}.modal-button.secondary:hover{background:#4d4d4d}.custom-terrain-edit{width:calc(100% - 10px);margin-left:5px;margin-right:5px;grid-column:3 / 5;grid-row:1;padding:8px 12px;background:linear-gradient(135deg,#3a3a3a,#2a2a2a);color:#fff;border:1px solid rgba(255,255,255,.2);border-radius:6px;cursor:pointer;font-size:15px;font-weight:400;transition:background .2s ease;height:38px;text-align:center;display:flex;align-items:center;justify-content:center;margin-top:9px;box-shadow:0 2px 4px #0003}.custom-terrain-edit:hover{background:linear-gradient(135deg,#4a4a4a,#3a3a3a);box-shadow:0 2px 4px #0003}.special-terrains-title{grid-column:1 / -1;margin:12px 0 8px;padding:0 4px;font-size:14px;color:#e0e0e0;font-weight:500;border-bottom:1px solid #404040}.export-preview-modal{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#2d2d2d;border:1px solid #404040;border-radius:8px;padding:24px;width:90vw;max-width:1000px;max-height:90vh;z-index:2000;box-shadow:0 8px 24px #0006;display:flex;flex-direction:column;gap:20px}.export-preview-modal h3{margin:0;font-size:18px;color:#e0e0e0;font-weight:600}.export-preview-container{flex:1;min-height:0;overflow:auto;background:#1e1e1e;border:1px solid #404040;border-radius:6px;padding:16px;display:flex;align-items:center;justify-content:center;scrollbar-width:thin;scrollbar-color:#404040 transparent}.export-preview-container::-webkit-scrollbar{width:8px}.export-preview-container::-webkit-scrollbar-track{background:transparent}.export-preview-container::-webkit-scrollbar-thumb{background-color:#404040;border-radius:4px;border:2px solid #1e1e1e}.export-preview-container::-webkit-scrollbar-thumb:hover{background-color:#505050}.export-preview-container canvas{max-width:100%;max-height:100%;object-fit:contain;border-radius:4px;box-shadow:0 4px 12px #0003}.export-dimensions-info{color:#e0e0e0;font-size:14px;text-align:center;padding:8px;background:rgba(0,0,0,.2);border-radius:4px}.modal-close-button{position:absolute;top:12px;right:12px;width:32px;height:32px;border:none;background:none;color:#e0e0e0;font-size:24px;cursor:pointer;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s ease;padding:0;line-height:1}.modal-close-button:hover{background:rgba(255,255,255,.1);color:#fff}.reset-map-button{position:absolute;bottom:0;left:50%;transform:translate(-50%);width:240px;padding:8px 12px;height:38px;margin:16px auto;text-align:center;background-color:#662424!important;color:#ffffffe6;border:1px solid #552020;border-radius:4px;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.reset-map-button:hover{background-color:#f44!important;border-color:#f66;color:#fff}.mode-button,.drawing-button,.export-button,.custom-terrain-edit{height:38px;display:flex;align-items:center;justify-content:center}.mode-button,.drawing-button,.export-button{padding:8px 12px}.compass-control{display:flex;align-items:center;gap:12px;padding:12px;background:rgba(0,0,0,.2);border-radius:4px;flex:1;font-size:14px}.compass-control label{padding-left:24px}.compass-control>*{display:flex;align-items:center}.compass-size-control{display:none;align-items:center;margin:0;padding:0;background:none}.compass-size-control .size-slider{width:100px;height:4px;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#404040;border-radius:2px;outline:none}.compass-size-control .size-slider::-webkit-slider-thumb{-webkit-appearance:none;width:16px;height:16px;border-radius:50%;background:#0078d4;cursor:pointer;border:none}.compass-size-control .size-slider::-moz-range-thumb{width:16px;height:16px;border-radius:50%;background:#0078d4;cursor:pointer;border:none}.export-dimensions-info{display:flex;align-items:center;padding:12px;background:rgba(0,0,0,.2);border-radius:4px;flex:1;justify-content:center;font-size:14px}.export-preview-container canvas{cursor:default}.export-preview-container canvas.dragging{cursor:grabbing}.export-preview-container canvas.compass-active{cursor:grab}.export-preview-container canvas.compass-active:hover{cursor:grab}.compass-tooltip{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,.85);border:1px solid rgba(255,255,255,.2);color:#fff;padding:12px 84px 12px 16px;border-radius:4px;font-size:14px;white-space:nowrap;opacity:0;transition:opacity .3s ease;z-index:2100;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);box-shadow:0 4px 12px #0006}.compass-tooltip.visible{opacity:1}.compass-tooltip .timer{position:absolute;right:44px;top:50%;transform:translateY(-50%);width:32px;height:32px;display:flex;align-items:center;justify-content:center}.compass-tooltip .close-tooltip{position:absolute;right:8px;top:50%;transform:translateY(-50%);width:32px;height:32px;border:none;background:none;color:#fff;font-size:18px;line-height:1;cursor:pointer;display:flex;align-items:center;justify-content:center;opacity:.7;transition:opacity .2s ease;padding:0}.compass-tooltip .timer-circle{position:absolute;width:24px;height:24px}.compass-tooltip .timer-circle circle{fill:none;stroke:#ffffff4d;stroke-width:2}.compass-tooltip .timer-circle circle.progress{stroke:#fff;stroke-dasharray:63;transform:rotate(-90deg);transform-origin:center;transition:stroke-dashoffset 1s linear}.compass-tooltip .timer-text{position:relative;color:#fff;font-size:12px;font-weight:500}.export-controls-container{display:flex;justify-content:space-between;gap:12px;margin-top:auto;padding-top:12px}.color-picker-tooltip{position:absolute;left:50%;transform:translate(-50%);margin-top:-12px;margin-bottom:4px;color:gray;font-size:14px;white-space:nowrap}.drawing-button:before,.export-button:before,.terrain-button:before,.toolbar-button:before{display:none}.drawing-button,.export-button,.terrain-button,.toolbar-button{background:linear-gradient(135deg,#3d3d3d,#2a2a2a);border-radius:12px;box-shadow:0 8px 16px #0000004d,inset 0 0 0 1px #ffffff1a;transition:background .3s ease,transform .3s ease!important;font-size:15px;font-weight:400;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);position:relative;overflow:visible}.drawing-button:hover,.export-button:hover,.terrain-button:hover,.toolbar-button:hover{background:linear-gradient(135deg,#4d4d4d,#3a3a3a);transform:scale(1.05);box-shadow:0 12px 24px #0000004d,inset 0 0 0 1px #fff3}.drawing-button:active,.export-button:active,.terrain-button:active,.toolbar-button:active{background:linear-gradient(135deg,#2a2a2a,#1e1e1e);box-shadow:0 4px 8px #0000004d,inset 0 0 0 1px #ffffff1a;transform:scale(.98)}.terrain-button,.route-button{transition-property:background,transform!important}.terrain-button.selected,.route-button.selected{transition:none!important;animation:none!important}.terrain-button,.route-button{transition-duration:.3s,.3s,0s,0s!important;transition-property:background,transform,border-color,box-shadow!important}.export-button,.reset-map-button{background:linear-gradient(135deg,#3a3a3a,#2a2a2a);border-radius:6px;box-shadow:0 2px 4px #0003;transition:background .2s ease,transform .2s ease;font-size:15px;font-weight:400;color:#fff}.export-button:hover,.reset-map-button:hover{background:linear-gradient(135deg,#4a4a4a,#3a3a3a);box-shadow:0 2px 4px #0003;transform:none}.reset-map-button{background:linear-gradient(135deg,#d32f2f,#c62828);border-color:#b71c1c}.reset-map-button:hover{background:linear-gradient(135deg,#e53935,#d32f2f);border-color:#c62828;transform:none}
